{% extends "base.html" %}

{% block title %}Resolve Course Conflicts{% endblock %}

{% block content %}
    <div class="container py-5">
        <h1 class="text-center text-primary mb-5">Resolve Course Conflicts</h1>

        <div class="row">
            <!-- Greedy Algorithm Result Section -->
            <div class="col-md-6 mb-4">
                <div class="card shadow-sm rounded">
                    <div class="card-header bg-primary text-white">
                        <h3 class="card-title">Greedy Algorithm Result</h3>
                    </div>
                    <div class="card-body">
                        <p class="text-muted">The Greedy Algorithm resolves conflicts by selecting the first available room and time slot for each course. Below are the results:</p>
                        
                        {% if greedy_result['resolved_courses'] %}
                            <div class="alert alert-info" role="alert">
                                <strong>Resolved Courses:</strong>
                                <ul>
                                    {% for course in greedy_result['resolved_courses'] %}
                                        <li>
                                            <strong>{{ course.course_title }}</strong> ({{ course.teacher_name }})<br>
                                            Time: {{ course.class_start_time }} - {{ course.class_end_time }} | Room: {{ course.room }}<br>
                                            Day: {{ course.day_of_week }}
                                        </li>
                                    {% endfor %}
                                </ul>
                            </div>
                        {% else %}
                            <p>No resolved courses found in the Greedy Algorithm result. Please review the scheduling conflicts or try an alternative method.</p>
                        {% endif %}

                        {% if greedy_result['unresolved_courses'] %}
                            <div class="alert alert-danger" role="alert">
                                <strong>Unresolved Courses:</strong>
                                <ul>
                                    {% for course in greedy_result['unresolved_courses'] %}
                                        <li>
                                            <strong>{{ course.course_title }}</strong> ({{ course.teacher_name }})<br>
                                            Time: {{ course.class_start_time }} - {{ course.class_end_time }} | Room: {{ course.room }}<br>
                                            Day: {{ course.day_of_week }}<br>
                                            <small class="text-danger">{{ course.conflict }}</small>
                                        </li>
                                    {% endfor %}
                                </ul>
                            </div>
                        {% else %}
                            <p>All courses have been successfully scheduled by the Greedy Algorithm.</p>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Backtracking Algorithm Result Section -->
            <div class="col-md-6 mb-4">
                <div class="card shadow-sm rounded">
                    <div class="card-header bg-success text-white">
                        <h3 class="card-title">Backtracking Algorithm Result</h3>
                    </div>
                    <div class="card-body">
                        <p class="text-muted">The Backtracking Algorithm assigns time slots recursively and backtracks in case of conflicts. Below are the results:</p>
                        
                        {% if backtracking_result %}
                            {% if backtracking_result['resolved_courses'] %}
                                <div class="alert alert-info" role="alert">
                                    <strong>Resolved Courses:</strong>
                                    <ul>
                                        {% for course in backtracking_result['resolved_courses'] %}
                                            <li>
                                                <strong>{{ course.course_title }}</strong> ({{ course.teacher_name }})<br>
                                                Time: {{ course.class_start_time }} - {{ course.class_end_time }} | Room: {{ course.room }}<br>
                                                Day: {{ course.day_of_week }}
                                            </li>
                                        {% endfor %}
                                    </ul>
                                </div>
                            {% else %}
                                <p>No courses were resolved by the Backtracking Algorithm. Consider modifying the schedule or input data.</p>
                            {% endif %}

                            {% if backtracking_result['unresolved_courses'] %}
                                <div class="alert alert-danger" role="alert">
                                    <strong>Unresolved Courses:</strong>
                                    <ul>
                                        {% for course in backtracking_result['unresolved_courses'] %}
                                            <li>
                                                <strong>{{ course.course_title }}</strong> ({{ course.teacher_name }})<br>
                                                Time: {{ course.class_start_time }} - {{ course.class_end_time }} | Room: {{ course.room }}<br>
                                                Day: {{ course.day_of_week }}<br>
                                                <small class="text-danger">{{ course.conflict }}</small>
                                            </li>
                                        {% endfor %}
                                    </ul>
                                </div>
                            {% else %}
                                <p>All courses have been successfully scheduled by the Backtracking Algorithm.</p>
                            {% endif %}
                        {% else %}
                            <p>The Backtracking Algorithm did not yield any results. Please verify the input data or try again.</p>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>

        <div class="text-center mt-5">
            <a href="{{ url_for('course_schedule') }}" class="btn btn-primary btn-lg">Back to Course Schedule</a>
        </div>
    </div>

    <!-- Custom CSS -->
    <style>
        .card {
            transition: transform 0.3s ease-in-out;
        }
        .card:hover {
            transform: translateY(-10px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        .alert {
            font-size: 1.1rem;
            line-height: 1.6;
        }
        h3.card-title {
            font-size: 1.5rem;
            font-weight: 600;
        }
        .btn-lg {
            padding: 15px 25px;
            font-size: 1.1rem;
        }
    </style>
{% endblock %}
